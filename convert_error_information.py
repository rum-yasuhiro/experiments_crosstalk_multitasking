from typing import Dict, Tuple


def value_to_ratio(xtalk_dict_dict: Dict[Tuple[str], Dict[Tuple[str], str]] = None, threshold: float = 0):
    result = {}
    for twoQcon, pairs in xtalk_dict_dict.items():
        for pair, value in pairs.items():
            ratio = value / xtalk_dict_dict[twoQcon][twoQcon]
            if ratio > threshold:
                try: 
                    result[twoQcon][pair] = ratio
                except: 
                    result[twoQcon] = {}
                    result[twoQcon][pair] = ratio
    return result


if __name__ == "__main__":
    epg = {(0, 1): {(0, 1): 0.007833798740751047,
          (2, 3): 0.01021121461451116,
          (3, 5): 0.0088713756191042,
          (5, 8): 0.007913974411613345,
          (8, 9): 0.007440013607293905,
          (8, 11): 0.00778797079477031,
          (11, 14): 0.008321202390429522,
          (14, 13): 0.0073764010904500965,
          (14, 16): 0.008413410705293667,
          (16, 19): 0.00803135656231696,
          (19, 20): 0.008479191930032742,
          (19, 22): 0.007994260071589626,
          (22, 25): 0.008455372619372459},
 (1, 2): {(1, 2): 0.03377095522594609,
          (3, 5): 0.03564849187730851,
          (4, 7): 0.031734477928476224,
          (5, 8): 0.03330877873713589,
          (7, 6): 0.03174162985252013,
          (7, 10): 0.035925165256820185,
          (8, 9): 0.03462981446110788,
          (8, 11): 0.03500388447403524,
          (10, 12): 0.03308260236816685,
          (11, 14): 0.03299891000245114,
          (12, 13): 0.0328642836721372,
          (12, 15): 0.03309189035978308,
          (13, 14): 0.03276954281466127,
          (14, 16): 0.036458550325473627,
          (15, 18): 0.036756237549706194,
          (16, 19): 0.03409694448464759,
          (18, 17): 0.032876548024440094,
          (18, 21): 0.034303856901692575,
          (19, 20): 0.034151754298907794,
          (19, 22): 0.030161607547438157,
          (21, 23): 0.03442197232371186,
          (22, 25): 0.027075240615745927,
          (23, 24): 0.02673338915377621,
          (24, 25): 0.025170841371067176,
          (25, 26): 0.02644377035083781},
 (1, 4): {(1, 4): 0.012860523971285925,
          (2, 3): 0.010784857660541741,
          (3, 5): 0.01070452434587818,
          (5, 8): 0.01197924844494494,
          (7, 6): 0.01342431674016556,
          (7, 10): 0.025822069881716397,
          (8, 9): 0.011387505780860285,
          (8, 11): 0.011489864283600215,
          (10, 12): 0.014503945429129306,
          (11, 14): 0.011194318839563427,
          (12, 15): 0.014050208645108392,
          (14, 13): 0.011470193375104798,
          (14, 16): 0.011513328203666795,
          (15, 18): 0.01483565956925148,
          (16, 19): 0.01223189012478379,
          (18, 17): 0.01498470225265397,
          (18, 21): 0.01388849403289863,
          (19, 20): 0.012799281736129708,
          (19, 22): 0.01273987631251286,
          (21, 23): 0.013718552579591425,
          (22, 25): 0.011734924007515884,
          (23, 24): 0.012754041368569974,
          (24, 25): 0.012245161731631538,
          (25, 26): 0.010811483128101207},
 (2, 3): {(0, 1): 0.036903934236646896,
          (1, 4): 0.035113867473073324,
          (2, 3): 0.03753958944316102,
          (4, 7): 0.03842085700070039,
          (5, 8): 0.08470011160918173,
          (7, 6): 0.03427033848361999,
          (7, 10): 0.037393162130154284,
          (8, 9): 0.036645087031686785,
          (8, 11): 0.03388107846685312,
          (10, 12): 0.03485588954776164,
          (11, 14): 0.03592650331273675,
          (12, 13): 0.04069051033861723,
          (12, 15): 0.0372900781212831,
          (13, 14): 0.03376325687951609,
          (14, 16): 0.03450781176286194,
          (15, 18): 0.03338692935952145,
          (16, 19): 0.03611595540185025,
          (18, 17): 0.03782660718862435,
          (18, 21): 0.03658470747268158,
          (19, 20): 0.03611652913388755,
          (19, 22): 0.03457578929511129,
          (21, 23): 0.035436319801814914,
          (22, 25): 0.03579989847499582,
          (23, 24): 0.03548543594365125,
          (24, 25): 0.03926221275027733,
          (25, 26): 0.03801325568090341},
 (4, 7): {(1, 2): 0.02245784098747508,
          (2, 3): 0.023008698226884144,
          (3, 5): 0.021577619933663056,
          (4, 7): 0.020050288047392312,
          (5, 8): 0.02094327599409121,
          (8, 9): 0.021430686753593747,
          (8, 11): 0.02198405112884924,
          (10, 12): 0.028588798827436535,
          (11, 14): 0.022198713188821856,
          (12, 15): 0.02039116213409306,
          (14, 13): 0.021929860065558165,
          (14, 16): 0.021728163278566776,
          (15, 18): 0.01936181393050232,
          (16, 19): 0.02276240756388831,
          (18, 17): 0.021207975295943482,
          (18, 21): 0.020457125014804067,
          (19, 20): 0.023299046127885636,
          (19, 22): 0.022459625916462278,
          (21, 23): 0.022431073198644763,
          (22, 25): 0.020962064326935814,
          (23, 24): 0.0212756629744022,
          (24, 25): 0.02124651988261289,
          (25, 26): 0.021823393432922472},
 (5, 8): {(0, 1): 0.01117995201084715,
          (1, 2): 0.01172787562194419,
          (1, 4): 0.011974865899750442,
          (2, 3): 0.05255260459264385,
          (4, 7): 0.011794348987236553,
          (5, 8): 0.01192399680688111,
          (7, 6): 0.01162059210390301,
          (7, 10): 0.011169560685151653,
          (10, 12): 0.011329204276679217,
          (11, 14): 0.011841300376518177,
          (12, 13): 0.011070180276302632,
          (12, 15): 0.011121763041977567,
          (13, 14): 0.011687185191080113,
          (14, 16): 0.011179150654914122,
          (15, 18): 0.01209988490657704,
          (16, 19): 0.01147683254510598,
          (18, 17): 0.011663488361942337,
          (18, 21): 0.01177004547133828,
          (19, 20): 0.01178220584960113,
          (19, 22): 0.011771563846917132,
          (21, 23): 0.01139344034261039,
          (22, 25): 0.011764699664574357,
          (23, 24): 0.011942250197613608,
          (24, 25): 0.011986884886003107,
          (25, 26): 0.01136103897147242},
 (7, 6): {(7, 6): 0.018890302986767527,
          (10, 12): 0.022489403605085584,
          (12, 15): 0.01988230844083866,
          (15, 18): 0.017298218309703378,
          (18, 17): 0.017390680374811174,
          (18, 21): 0.01762814220344,
          (21, 23): 0.019005057291975103,
          (23, 24): 0.01908665557920386,
          (24, 25): 0.02013607003638676,
          (25, 26): 0.01806734064548371},
 (7, 10): {(0, 1): 0.015564185922804147,
           (1, 2): 0.014651928563095856,
           (1, 4): 0.025175319669205665,
           (2, 3): 0.014750702263870097,
           (3, 5): 0.01477124471986252,
           (5, 8): 0.014837538708364462,
           (7, 10): 0.01526222536435276,
           (8, 9): 0.015439167018654915,
           (8, 11): 0.01584869209576767,
           (11, 14): 0.01558754250916597,
           (12, 13): 0.01521749863693786,
           (12, 15): 0.06808374058160191,
           (13, 14): 0.01473850392568063,
           (14, 16): 0.01508532093840026,
           (15, 18): 0.014742958531781952,
           (16, 19): 0.014677586108835378,
           (18, 17): 0.015251756207962791,
           (18, 21): 0.014836444829131684,
           (19, 20): 0.017119745137204795,
           (19, 22): 0.014980680968681492,
           (21, 23): 0.016274888543119065,
           (22, 25): 0.014993870796908698,
           (23, 24): 0.016103562480291655,
           (24, 25): 0.015779213658213276,
           (25, 26): 0.014864708206875382},
 (8, 11): {(0, 1): 0.02066421383994485,
           (1, 2): 0.019484713286083227,
           (1, 4): 0.017836842089701377,
           (2, 3): 0.01844868528415461,
           (3, 5): 0.020030253162276718,
           (4, 7): 0.016952140970230817,
           (7, 6): 0.015102681605704577,
           (7, 10): 0.010360205264106054,
           (8, 11): 0.019430489010466345,
           (10, 12): 0.010156098783579204,
           (12, 13): 0.01002152019937183,
           (12, 15): 0.01057159421701287,
           (13, 14): 0.02216480454834696,
           (14, 16): 0.01705040032010194,
           (15, 18): 0.01065485357820542,
           (16, 19): 0.011572065591201858,
           (18, 17): 0.010841593338386052,
           (18, 21): 0.011162371875486271,
           (19, 20): 0.011151630167236803,
           (19, 22): 0.01201896544238823,
           (21, 23): 0.010392462227371613,
           (22, 25): 0.010537665527887818,
           (23, 24): 0.011678481204467905,
           (24, 25): 0.01168716895800831,
           (25, 26): 0.010559734589622477},
 (10, 12): {(0, 1): 0.01047734979756404,
            (1, 2): 0.009765403619179769,
            (1, 4): 0.01060276383900699,
            (2, 3): 0.010695465007187793,
            (3, 5): 0.009959760503770121,
            (4, 7): 0.027189715728671543,
            (5, 8): 0.010053055694348445,
            (7, 6): 0.010255719657432966,
            (8, 9): 0.009912843874103433,
            (8, 11): 0.009535868866510672,
            (10, 12): 0.011498641643434587,
            (11, 14): 0.010219557933079854,
            (13, 14): 0.059311762515115884,
            (14, 16): 0.009635306366286595,
            (15, 18): 0.039101407788719705,
            (16, 19): 0.008891008717315713,
            (18, 17): 0.009948677301879788,
            (18, 21): 0.009577458699435742,
            (19, 20): 0.00940704233866943,
            (19, 22): 0.010150221701823031,
            (21, 23): 0.010068439747287744,
            (22, 25): 0.009881305662116868,
            (23, 24): 0.009017352126701267,
            (24, 25): 0.01023585240626293,
            (25, 26): 0.010136518317598597},
 (11, 14): {(0, 1): 0.012832581339107335,
            (1, 2): 0.011615318817072062,
            (1, 4): 0.013126866259155184,
            (2, 3): 0.012124839844511376,
            (3, 5): 0.013568768359055156,
            (4, 7): 0.012611071970030335,
            (5, 8): 0.012328726196307566,
            (7, 6): 0.011828566727192708,
            (7, 10): 0.012694837947106963,
            (8, 9): 0.014231286704558616,
            (10, 12): 0.012694794715560703,
            (11, 14): 0.013178496336498702,
            (12, 13): 0.020842291744896657,
            (12, 15): 0.012258956829070494,
            (15, 18): 0.012428539161735641,
            (16, 19): 0.013067837491795103,
            (18, 17): 0.012649030121842736,
            (18, 21): 0.012162926853853256,
            (19, 20): 0.013700217934740827,
            (19, 22): 0.013278113768530886,
            (21, 23): 0.013647593221288251,
            (22, 25): 0.01271220671839135,
            (23, 24): 0.012947810842165647,
            (24, 25): 0.012923552660190324,
            (25, 26): 0.0134436490311238},
 (12, 13): {(0, 1): 0.011550339257767439,
            (1, 2): 0.009939712023500274,
            (1, 4): 0.010601209703184872,
            (2, 3): 0.01044809464654467,
            (3, 5): 0.010242567591214446,
            (4, 7): 0.011714037736607175,
            (5, 8): 0.01172856189509866,
            (7, 6): 0.011255740490994565,
            (7, 10): 0.01087803292379308,
            (8, 9): 0.011179150393542364,
            (8, 11): 0.011528644969450996,
            (11, 14): 0.020861380120844625,
            (12, 13): 0.01073677975760326,
            (14, 16): 0.012233664722865356,
            (15, 18): 0.010949385588980731,
            (16, 19): 0.011004914034447227,
            (18, 17): 0.010365834195002449,
            (18, 21): 0.011868581564697361,
            (19, 20): 0.011663023335141437,
            (19, 22): 0.01158845877693182,
            (21, 23): 0.012611737728197847,
            (22, 25): 0.009894317112021545,
            (23, 24): 0.010145589771828806,
            (24, 25): 0.009434730663149704,
            (25, 26): 0.00942477047145604},
 (12, 15): {(0, 1): 0.014645890478332424,
            (1, 2): 0.01460582943206254,
            (1, 4): 0.013844586923255214,
            (2, 3): 0.013109153991090944,
            (3, 5): 0.014301643917522616,
            (4, 7): 0.013713036931565031,
            (5, 8): 0.014424117474111375,
            (7, 6): 0.015309101112218254,
            (7, 10): 0.048758955878814514,
            (8, 9): 0.013997452527688442,
            (8, 11): 0.012548769626851503,
            (11, 14): 0.013804759704284353,
            (12, 15): 0.0144592442034856,
            (13, 14): 0.050270560033737643,
            (14, 16): 0.016070256007296974,
            (16, 19): 0.015008587686952235,
            (18, 17): 0.021287985980617485,
            (18, 21): 0.018777917728432125,
            (19, 20): 0.014936412639075386,
            (19, 22): 0.016539815687465792,
            (21, 23): 0.01434704508946133,
            (22, 25): 0.01543072206425014,
            (23, 24): 0.013821531614917087,
            (24, 25): 0.013607664823750115,
            (25, 26): 0.015073019730942189},
 (13, 14): {(0, 1): 0.011012568872726974,
            (1, 2): 0.01481539146884564,
            (1, 4): 0.011241351765459845,
            (2, 3): 0.011909121605650663,
            (3, 5): 0.013475254187488406,
            (4, 7): 0.011361009141820255,
            (5, 8): 0.011958297772281384,
            (7, 6): 0.013145596720344072,
            (7, 10): 0.013160483101709752,
            (8, 9): 0.013216256619172612,
            (8, 11): 0.026332386236213007,
            (10, 12): 0.05168212589003651,
            (12, 15): 0.08218756998486676,
            (13, 14): 0.013647949369902018,
            (15, 18): 0.012193339606087261,
            (16, 19): 0.013884650476299387,
            (18, 17): 0.01397053162573253,
            (18, 21): 0.0136057275422021,
            (19, 20): 0.014414646379996315,
            (19, 22): 0.011943461284965762,
            (21, 23): 0.013991735977598646,
            (22, 25): 0.013526820559748715,
            (23, 24): 0.013025043243940077,
            (24, 25): 0.012783372629298961,
            (25, 26): 0.011290431037779824},
 (15, 18): {(0, 1): 0.030708948557246485,
            (1, 2): 0.028243884687292997,
            (1, 4): 0.0301133303059421,
            (2, 3): 0.0282881396022229,
            (3, 5): 0.02975067199255732,
            (4, 7): 0.02980106150206871,
            (5, 8): 0.029789205661069434,
            (7, 6): 0.027740424443458506,
            (7, 10): 0.02922140945628726,
            (8, 9): 0.027183274292235132,
            (8, 11): 0.02679247106194846,
            (10, 12): 0.056065435988343015,
            (11, 14): 0.030982525915166065,
            (12, 13): 0.028910273784421514,
            (13, 14): 0.02827309208810641,
            (14, 16): 0.028326775054022063,
            (15, 18): 0.028800154017621565,
            (16, 19): 0.03608663805440662,
            (19, 20): 0.027644123600272213,
            (19, 22): 0.03143336050321302,
            (21, 23): 0.030518329820906492,
            (22, 25): 0.027684241912726393,
            (23, 24): 0.031460126361695456,
            (24, 25): 0.03187761232161951,
            (25, 26): 0.028660286808458807},
 (18, 21): {(0, 1): 0.01906371289073633,
            (1, 2): 0.01746850185894358,
            (1, 4): 0.01848997898617788,
            (2, 3): 0.016960358552408877,
            (3, 5): 0.01913143532288597,
            (4, 7): 0.019907634891226794,
            (5, 8): 0.01907543063394973,
            (7, 6): 0.020001177241892182,
            (7, 10): 0.01751579301075315,
            (8, 9): 0.0198859537673986,
            (8, 11): 0.018242151551358415,
            (10, 12): 0.019618734753606815,
            (11, 14): 0.019521822865951416,
            (12, 13): 0.019299086467277737,
            (12, 15): 0.020197622900470807,
            (13, 14): 0.02007548134376347,
            (14, 16): 0.01893376303209804,
            (16, 19): 0.019945925283946647,
            (18, 21): 0.01972987062483278,
            (19, 20): 0.019019252450555357,
            (19, 22): 0.01751360338729893,
            (22, 25): 0.01994100242061167,
            (23, 24): 0.019148910307786843,
            (24, 25): 0.018406694999567874,
            (25, 26): 0.019115401829749468},
 (19, 20): {(0, 1): 0.016838624209145586,
            (1, 2): 0.017268556581259864,
            (1, 4): 0.01799417479805479,
            (2, 3): 0.015338299789499105,
            (3, 5): 0.018247229052699127,
            (4, 7): 0.01472533012574237,
            (5, 8): 0.016064594126726756,
            (7, 6): 0.015446633491395911,
            (7, 10): 0.014855335660351576,
            (8, 9): 0.019994325489934045,
            (8, 11): 0.015989078101789816,
            (10, 12): 0.015444324827562056,
            (11, 14): 0.01761819949259419,
            (12, 13): 0.015624833491334505,
            (12, 15): 0.016408116355372565,
            (13, 14): 0.01797810079801654,
            (14, 16): 0.021719561695078216,
            (15, 18): 0.019607139371351195,
            (18, 17): 0.019373591065980078,
            (18, 21): 0.018690854795022388,
            (19, 20): 0.015481662048497491,
            (21, 23): 0.019536011673068565,
            (22, 25): 0.02199427013425262,
            (23, 24): 0.017159698451071848,
            (24, 25): 0.01749409709623337,
            (25, 26): 0.018287139893988724},
 (21, 23): {(0, 1): 0.029921937344836724,
            (1, 2): 0.029450753502926724,
            (1, 4): 0.028096565685462233,
            (2, 3): 0.030762195170628948,
            (3, 5): 0.02919896696334215,
            (4, 7): 0.02782982337226053,
            (5, 8): 0.027539373746452295,
            (7, 6): 0.026480220884435024,
            (7, 10): 0.02728460100202415,
            (8, 9): 0.02833205671087702,
            (8, 11): 0.028490028327668504,
            (10, 12): 0.03057999789661961,
            (11, 14): 0.027885464626541484,
            (12, 13): 0.02670268854359173,
            (12, 15): 0.028907679507443607,
            (13, 14): 0.0258790969068097,
            (14, 16): 0.028964546487138976,
            (15, 18): 0.028714587955898263,
            (16, 19): 0.03578966405929149,
            (18, 17): 0.04156079416702155,
            (19, 20): 0.03680657741214963,
            (19, 22): 0.041288989303770424,
            (21, 23): 0.031440862091741545,
            (22, 25): 0.03646150325985048,
            (24, 25): 0.036005853608426924,
            (25, 26): 0.0384796505136267}
            }

    result = value_to_ratio(epg, threshold=1.5)
    print(result)
